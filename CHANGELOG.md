# Changelog

Все важные изменения в этом проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Семантического Версионирования](https://semver.org/lang/ru/).

## [Unreleased]
### Планируется
- Улучшения безопасности: HKDF для расширения ключей
- Улучшенное логирование и обработка ошибок

## [1.1.0] - 15.09.2025
### Добавлено
- **Система безопасного управления памятью**: новый пакет `internal/security`
- **SecureString**: безопасное хранение паролей с автоматической очисткой памяти
- **SecureMemoryPool**: оптимизированное управление буферами памяти
- **SecureBuffer** и **SecureAllocator**: пулы памяти для повышения производительности
- Функции безопасной очистки: `ZeroMemory()`, `SecureWipe()`, `SecureCompare()`
- Генерация криптографически стойких случайных данных: `SecureRandom()`
- Константное время сравнения для защиты от timing атак

### Изменено
- **Полная интеграция SecureString**: все пароли теперь хранятся в защищенной памяти
- Пакет `internal/input`: возвращает `SecureString` вместо обычных строк
- Пакет `internal/generator`: работает с `SecureString` для мастер-паролей и генерируемых паролей
- CLI (`cmd/root.go`): использует `SecureString` с автоматической очисткой памяти
- Пакет `internal/clipboard`: интегрирован для безопасной работы с `SecureString`
- Все тесты переписаны для работы с новой системой безопасности

### Исправлено
- Опечатка в комментарии к конфигурации Argon2 в `internal/generator/password.go`: "сонфиг" → "конфиг"
- Жестко заданная английская локаль в `cmd/root.go` заменена на автоматическое определение языка

### Оптимизировано
- **Критическая оптимизация производительности**: функция поиска словарных слов в валидаторе паролей
  - Преобразован массив `commonWords` в хеш-таблицу `commonWordsMap`
  - Улучшена сложность поиска с O(n) до O(1)
  - Значительное ускорение валидации паролей, особенно при большом объеме проверок
  - Убран дублирующийся ключ "passw0rd" из словаря

### Безопасность
- **Защита от утечек паролей в памяти**: автоматическая очистка чувствительных данных
- **Перезапись памяти случайными данными** перед обнулением для предотвращения восстановления
- **Использование defer** для гарантированной очистки памяти даже при ошибках
- **Thread-safe операции** с пулами памяти
- **Обратная совместимость**: алгоритм генерации паролей остался неизменным

### Техническое
- Добавлены бенчмарки для измерения производительности security компонентов
- Все тесты написаны на русском языке согласно стилю проекта
- 100% покрытие тестами для нового пакета security
- Удалена неиспользуемая константа `charset` из generator пакета

## [1.0.3] - 15.09.2025
### Исправлено
- Критическая ошибка: убран pepper из генерации salt
- Восстановлен детерминизм паролей между разными устройствами
- Одинаковые пароли для Windows, Linux, macOS при одинаковых параметрах

### Удалено
- Поле Pepper из структуры Config
- Функция generateRandomPepper()
- Параметр pepper из GeneratePassword()
- Ненужные импорты crypto/rand и encoding/hex

### Изменено
- Схема генерации salt: `SHA256("PGenCLI|v1|" + serviceName + "|" + username)`
- Подпись метода GeneratePassword() для работы без pepper
- Обновлены все тесты для новой схемы

### Безопасность
- Восстановлена кросс-платформенная совместимость
- Сохранены улучшения безопасности (версионирование + username)

## [1.0.2] - 14.09.2025
### Добавлено
- Улучшенная схема генерации salt с версионированием
- Персонализация паролей через username в конфигурации
- Дополнительная энтропия через случайный pepper
- Функция generateRandomPepper() для повышения безопасности

### Изменено
- Схема генерации salt: `SHA256("PGenCLI|v1|" + serviceName + "|" + username + "|" + pepper)`
- Добавлены поля Username и Pepper в структуру Config
- Обновлена подпись метода GeneratePassword() для поддержки новых параметров
- Обновлены все тесты для работы с новой схемой генерации

### Безопасность
- Защита от коллизий через версионирование (v1)
- Уникальность паролей для разных пользователей
- Увеличенная энтропия для защиты от атак

## [1.0.1] - 13.09.2025
### Исправлено
- Исправлены интеграционные тесты
- Улучшена стабильность CLI

### Изменено
- Обновлены зависимости
- Улучшена обработка ошибок

## [1.0.0] - 02.09.2025
### Добавлено
- Первый стабильный релиз
- Детерминированная генерация паролей с Argon2
- Поддержка конфигурации пользователя
- Интеграция с буфером обмена
- Анализ силы паролей
- Поддержка нескольких языков (EN/RU)
- Установка в системные пути
- Кроссплатформенная поддержка (Windows, Linux, macOS, FreeBSD)

### Безопасность
- Использование Argon2 для криптографического хеширования
- Защита от атак радужных таблиц
- Временная очистка буфера обмена

[Unreleased]: https://github.com/MaksymLeiber/pgen/compare/v1.1.0...HEAD
[1.1.0]: https://github.com/MaksymLeiber/pgen/compare/v1.0.3...v1.1.0
[1.0.3]: https://github.com/MaksymLeiber/pgen/compare/v1.0.2...v1.0.3
[1.0.2]: https://github.com/MaksymLeiber/pgen/compare/v1.0.1...v1.0.2
[1.0.1]: https://github.com/MaksymLeiber/pgen/compare/v1.0.0...v1.0.1
[1.0.0]: https://github.com/MaksymLeiber/pgen/releases/tag/v1.0.0